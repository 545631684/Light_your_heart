!function(e,t,N,r){"use strict";function O(e,t){o.apply(e,x(t)?t:[t])}var S=t("./utils.js"),d=t("./formats.js"),y=N.prototype.hasOwnProperty,p={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},x=r.isArray,o=r.prototype.push,n=Date.prototype.toISOString,i=d.default,P={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:S.encode,encodeValuesOnly:!1,format:i,formatter:d.formatters[i],indices:!1,serializeDate:function(e){return n.call(e)},skipNulls:!1,strictNullHandling:!1};e.exports=function(e,t){var r=e,o=function(e){if(!e)return P;if(null!==e.encoder&&void 0!==e.encoder&&"function"!=typeof e.encoder)throw new TypeError("Encoder has to be a function.");var t=e.charset||P.charset;if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var r=d.default;if(void 0!==e.format){if(!y.call(d.formatters,e.format))throw new TypeError("Unknown format option provided.");r=e.format}var o=d.formatters[r],n=P.filter;return"function"!=typeof e.filter&&!x(e.filter)||(n=e.filter),{addQueryPrefix:"boolean"==typeof e.addQueryPrefix?e.addQueryPrefix:P.addQueryPrefix,allowDots:void 0===e.allowDots?P.allowDots:!!e.allowDots,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:P.charsetSentinel,delimiter:void 0===e.delimiter?P.delimiter:e.delimiter,encode:"boolean"==typeof e.encode?e.encode:P.encode,encoder:"function"==typeof e.encoder?e.encoder:P.encoder,encodeValuesOnly:"boolean"==typeof e.encodeValuesOnly?e.encodeValuesOnly:P.encodeValuesOnly,filter:n,formatter:o,serializeDate:"function"==typeof e.serializeDate?e.serializeDate:P.serializeDate,skipNulls:"boolean"==typeof e.skipNulls?e.skipNulls:P.skipNulls,sort:"function"==typeof e.sort?e.sort:null,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:P.strictNullHandling}}(t);"function"==typeof o.filter?r=(0,o.filter)("",r):x(o.filter)&&(a=o.filter);var n,i=[];if("object"!=typeof r||null===r)return"";n=t&&t.arrayFormat in p?t.arrayFormat:!(t&&"indices"in t)||t.indices?"indices":"repeat";var l=p[n],a=a||N.keys(r);o.sort&&a.sort(o.sort);for(var s=0;s<a.length;++s){var f=a[s];o.skipNulls&&null===r[f]||O(i,function e(t,r,o,n,i,l,a,s,f,c,u,d,y){var p,m=t;if("function"==typeof a?m=a(r,m):m instanceof Date?m=c(m):"comma"===o&&x(m)&&(m=S.maybeMap(m,function(e){return e instanceof Date?c(e):e}).join(",")),null===m){if(n)return l&&!d?l(r,P.encoder,y,"key"):r;m=""}if("string"==typeof(p=m)||"number"==typeof p||"boolean"==typeof p||"symbol"==typeof p||"bigint"==typeof p||S.isBuffer(m))return l?[u(d?r:l(r,P.encoder,y,"key"))+"="+u(l(m,P.encoder,y,"value"))]:[u(r)+"="+u(String(m))];var h,v,b=[];if(void 0===m)return b;v=x(a)?a:(h=N.keys(m),s?h.sort(s):h);for(var D=0;D<v.length;++D){var w,g=v[D],k=m[g];i&&null===k||(w=x(m)?"function"==typeof o?o(r,g):r:r+(f?"."+g:"["+g+"]"),O(b,e(k,w,o,n,i,l,a,s,f,c,u,d,y)))}return b}(r[f],f,l,o.strictNullHandling,o.skipNulls,o.encode?o.encoder:null,o.filter,o.sort,o.allowDots,o.serializeDate,o.formatter,o.encodeValuesOnly,o.charset))}var c=i.join(o.delimiter),u=!0===o.addQueryPrefix?"?":"";return o.charsetSentinel&&("iso-8859-1"===o.charset?u+="utf8=%26%2310003%3B&":u+="utf8=%E2%9C%93&"),0<c.length?u+c:""}}(module,(exports,require),Object,Array);