!function(t,e,j,i){"use strict";j.defineProperty(t,"__esModule",{value:!0});var k=j.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)j.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},O=function(t,e){if(i.isArray(t))return t;if(Symbol.iterator in j(t))return function(t,e){var n=[],o=!0,r=!1,a=void 0;try{for(var i,s=t[Symbol.iterator]();!(o=(i=s.next()).done)&&(n.push(i.value),!e||n.length!==e);o=!0);}catch(t){r=!0,a=t}finally{try{!o&&s.return&&s.return()}finally{if(r)throw a}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},n=function(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),t};function o(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),j.defineProperty(t,o.key,o)}}var r,a,x=e("../../npm/@tarojs/taro-weapp/index.js"),F=s(x),$=e("../../store/global_data.js"),P=s(e("../../services/api.js")),T=s(e("../../utils/toast.js"));function s(t){return t&&t.__esModule?t:{default:t}}function u(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var l=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=j.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(j.setPrototypeOf?j.setPrototypeOf(t,e):t.__proto__=e)}(c,F.default.Component),n(c,[{key:"_constructor",value:function(t){(function t(e,n,o){null===e&&(e=Function.prototype);var r=j.getOwnPropertyDescriptor(e,n);if(void 0===r){var a=j.getPrototypeOf(e);return null===a?void 0:t(a,n,o)}if("value"in r)return r.value;var i=r.get;return void 0!==i?i.call(o):void 0})(c.prototype.__proto__||j.getPrototypeOf(c.prototype),"_constructor",this).call(this,t),this.$$refs=new F.default.RefsArray}},{key:"_createData",value:function(t,e,n){this.__state=t||this.state||{},this.__props=e||this.props||{},this.$prefix;var o=(0,x.useRouter)(),r=o.params,a=r.id,i=r.title,s=o.path,u=(0,x.useState)({}),l=O(u,2),c=l[0],f=l[1],p=(0,x.useState)(),y=O(p,2),d=y[0],g=y[1],m=F.default.getStorageSync("userId");function v(t){var e=1===t?!c.IsFav:c.IsFav,n=2===t?!c.IsLike:c.IsLike;P.default.likeorfav({UserId:m,ObjId:a,Type:0,Action:t,IsFav:e,IsLike:n}).then(function(t){console.log(t),F.default.$articleClicked=!0,0===t.code?(T.default.show(t.msg,"success"),f(k({},c,{IsFav:e,IsLike:n}))):T.default.show(t.msg)})}(0,x.useEffect)(function(){F.default.$articleClicked=!1,F.default.setNavigationBarTitle({title:i}),F.default.showLoading(),P.default.getNewsDetail({newsId:a,userId:m}).then(function(t){F.default.hideLoading(),console.log(t),0===t.code?f(t.data):g(t.msg)}).catch(function(t){F.default.hideLoading()})},[a]),(0,x.useShareAppMessage)(function(t){return console.log(t),{title:i,path:s+"?id="+a+"&title="+i,success:function(t){console.log(t),console.log("转发成功:"+JSON.stringify(t))},fail:function(t){console.log("转发失败:"+JSON.stringify(t))}}});var _,h=(_=c.Content)?_.replace(/<img /gi,'<img class="tag-img" ').replace(/<p/gi,'<p class="tag-p"').replace(/(style="[^"]+")/gi,""):"",w="page-flex-footer "+((0,$.getKey)("isX")?"safe-x":"");this.anonymousFunc0=function(){return v(1)},this.anonymousFunc1=function(){return v(2)};var S,b=d&&(!c||"{}"===JSON.stringify(c)),I=(S=c.VideoSrc)&&!/\.(png|jpg|gif|jpeg|webp)$/.test(S);return j.assign(this.__state,{anonymousState__temp:h,anonymousState__temp2:w,anonymousState__temp3:b,anonymousState__temp4:I,detail:c,errmsg:d}),this.__state}},{key:"anonymousFunc0",value:function(){}},{key:"anonymousFunc1",value:function(){}}]),a=r=c,r.$$events=["anonymousFunc0","anonymousFunc1"],r.$$componentPath="pages/articleDetail/index",a);function c(){var t,e,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c);for(var o=arguments.length,r=i(o),a=0;a<o;a++)r[a]=arguments[a];return(e=n=u(this,(t=c.__proto__||j.getPrototypeOf(c)).call.apply(t,[this].concat(r)))).config={navigationBarTitleText:"文章详情"},n.$usedState=["anonymousState__temp","anonymousState__temp2","anonymousState__temp3","anonymousState__temp4","detail","errmsg"],n.customComponents=[],u(n,e)}l.config={navigationBarTitleText:"文章详情"},t.default=l,Component(e("../../npm/@tarojs/taro-weapp/index.js").default.createComponent(l,!0))}(exports,require,Object,Array);